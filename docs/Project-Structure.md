# Project Structure
Relevant source files
- [.gitignore](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/.gitignore)
- [contracts/.gitignore](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/.gitignore)
- [contracts/README.md](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/README.md)

This document describes the directory layout and organization of the Aegis repository. It explains what each directory contains, the purpose of key files, and how the monorepo structure separates frontend and smart contract development concerns.

For information about installing required tools and dependencies, see [Prerequisites](/HACK3R-CRYPTO/Aegis/4.1-prerequisites). For details on managing Git submodules, see [Git Submodules](/HACK3R-CRYPTO/Aegis/4.3-git-submodules).

---

## Monorepo Layout

Aegis uses a monorepo architecture that separates frontend and smart contract code into distinct top-level directories. This allows independent development workflows while maintaining a unified version control structure.

### Directory Tree

```
ðŸ“¦ Aegis/

frontend/
(Next.js Application)

contracts/
(Foundry Project)

lib/
(Git Submodules)

.github/workflows/
(CI/CD)

Root Files
(README, .gitignore, etc)

app/
(Next.js Routes)

components/
(React Components)

public/
(Static Assets)

.next/
(Build Output)

out/
(Static Export)

src/
(Solidity Contracts)

script/
(Deployment Scripts)

test/
(Test Files)

out/
(Compiled Artifacts)

cache/
(Build Cache)

broadcast/
(Deployment Logs)

foundry.toml
(Configuration)

forge-std/
(Testing Framework)

uniswap-hooks/
(Hook Base Contracts)

hookmate/
(Hook Utilities)

system-smart-contracts/
(Reactive Network)

test.yml
(Test Workflow)
```

**Sources:**[.gitignore1-26](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/.gitignore#L1-L26)[contracts/.gitignore1-15](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/.gitignore#L1-L15)

---

## Contracts Directory

The `contracts/` directory contains all smart contract source code, deployment infrastructure, and testing logic. It is a complete Foundry project with standard directory conventions.

### Contracts Directory Structure

```
broadcast/ (Logs)

script/ (Deployment)

src/ (Source Code)

contracts/

src/

script/

test/

out/

cache/

broadcast/

foundry.toml

AegisHook.sol
(Unichain L2)

AegisSentinel.sol
(Reactive Network)

MockOracle.sol
(Sepolia L1)

AegisGuardianRegistry.sol
(Sepolia L1)

04_DeployOracle.s.sol

05_DeploySentinel.s.sol

06_DeployHook.s.sol

HookMiner.s.sol

11155111/
(Sepolia)

5318007/
(Reactive Kopli)

1301/
(Unichain Sepolia)
```

**Sources:**[contracts/.gitignore1-15](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/.gitignore#L1-L15)[contracts/README.md1-123](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/README.md#L1-L123)

### Source Code (`contracts/src/`)

Contains the four primary Solidity contracts that implement the Aegis system:
ContractFileNetworkPurpose**AegisHook**`src/AegisHook.sol`Unichain SepoliaUniswap v4 hook implementing circuit breaker**AegisSentinel**`src/AegisSentinel.sol`Reactive Network KopliAutonomous cross-chain event monitor**MockOracle**`src/MockOracle.sol`Ethereum SepoliaPrice feed simulator (replaced by Chainlink in production)**AegisGuardianRegistry**`src/AegisGuardianRegistry.sol`Ethereum SepoliaERC-721 + ERC-8004 reputation system
**Sources:**[contracts/README.md32-58](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/README.md#L32-L58)

### Deployment Scripts (`contracts/script/`)

Contains Foundry deployment scripts numbered in execution order:
ScriptTarget NetworkChain IDDescription`04_DeployOracle.s.sol`Ethereum Sepolia11155111Deploys `MockOracle` on L1`05_DeploySentinel.s.sol`Reactive Network Kopli5318007Deploys `AegisSentinel` with `--legacy` flag`06_DeployHook.s.sol`Unichain Sepolia1301Deploys `AegisHook` using CREATE2 salt`HookMiner.s.sol`N/AN/AUtility to calculate salt for BEFORE_SWAP flag (0x80...)
**Sources:**[contracts/README.md105-122](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/README.md#L105-L122)

### Compiled Artifacts (`contracts/out/`)

Generated by `forge build`. Contains JSON files with:

- Compiled bytecode
- ABI definitions
- Deployment bytecode
- Metadata and source mappings

This directory is excluded from version control via [contracts/.gitignore3](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/.gitignore#L3-L3)

**Sources:**[contracts/.gitignore2-3](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/.gitignore#L2-L3)

### Build Cache (`contracts/cache/`)

Stores intermediate compilation artifacts to speed up incremental builds. Automatically managed by Foundry and excluded from version control via [contracts/.gitignore2](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/.gitignore#L2-L2)

**Sources:**[contracts/.gitignore2](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/.gitignore#L2-L2)

### Deployment Logs (`contracts/broadcast/`)

Contains chain-specific subdirectories with deployment transaction logs in JSON format. Each deployment generates:

- `run-latest.json` - Most recent deployment
- `run-<timestamp>.json` - Historical deployments

Directory structure:

```
broadcast/
â”œâ”€â”€ 04_DeployOracle.s.sol/
â”‚   â””â”€â”€ 11155111/                    # Sepolia chain ID
â”‚       â””â”€â”€ run-latest.json
â”œâ”€â”€ 05_DeploySentinel.s.sol/
â”‚   â””â”€â”€ 5318007/                     # Reactive Kopli chain ID
â”‚       â””â”€â”€ run-latest.json
â””â”€â”€ 06_DeployHook.s.sol/
    â””â”€â”€ 1301/                        # Unichain Sepolia chain ID
        â””â”€â”€ run-latest.json

```

This directory is excluded from version control by default via [contracts/.gitignore6](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/.gitignore#L6-L6) but deployment logs are valuable for tracking deployed addresses across networks.

**Sources:**[contracts/.gitignore5-6](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/.gitignore#L5-L6)

### Configuration (`contracts/foundry.toml`)

Configures the Foundry toolchain with:

- Solidity compiler version and optimizer settings
- Remappings for import resolution
- RPC endpoints for each network
- Test and deployment profiles

For detailed configuration options, see [Foundry Configuration](/HACK3R-CRYPTO/Aegis/4.4-foundry-configuration).

**Sources:**[contracts/README.md1-123](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/README.md#L1-L123)

---

## Frontend Directory

The `frontend/` directory contains a Next.js application that provides a dashboard for monitoring and interacting with the deployed Aegis system. It runs on `localhost:3000` during development.

### Frontend Directory Structure

```
frontend/

app/
(Next.js 13+ App Router)

components/
(React Components)

public/
(Static Assets)

styles/
(CSS/Tailwind)

.next/
(Build Output)

out/
(Static Export)

package.json
(Dependencies)

next.config.js
(Configuration)

tsconfig.json
(TypeScript Config)

.next/cache/
(Build Cache)

.next/static/
(Bundled Assets)
```

**Sources:**[.gitignore20-22](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/.gitignore#L20-L22)

### Build Outputs
DirectoryPurposeVersion Control`.next/`Development server build artifactsExcluded via [.gitignore21](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/.gitignore#L21-L21)`out/`Static HTML export for production deploymentExcluded via [.gitignore22](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/.gitignore#L22-L22)
The frontend build process:

1. **Development**: `npm run dev` â†’ outputs to `.next/`
2. **Production**: `npm run build` â†’ outputs to `.next/`
3. **Static Export**: `npm run export` â†’ outputs to `out/`

**Sources:**[.gitignore20-22](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/.gitignore#L20-L22)

---

## Root Level Files

### Version Control Configuration
FilePurposeKey Exclusions`.gitignore`Root-level exclusions`.env`, `node_modules/`, `out/`, `cache/`, all `*.md` except `README.md``contracts/.gitignore`Contracts-specific exclusions`cache/`, `out/`, `broadcast/`, `docs/`, `.env`, `node_modules/`
**Sources:**[.gitignore1-26](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/.gitignore#L1-L26)[contracts/.gitignore1-15](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/.gitignore#L1-L15)

### Markdown Files

The root `.gitignore` excludes all Markdown files except `README.md` via the pattern:

```
*.md
!README.md

```

This means documentation files like `CONTRIBUTING.md`, `LICENSE.md`, or technical notes are not tracked unless explicitly forced with `git add -f`.

**Sources:**[.gitignore25-26](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/.gitignore#L25-L26)

---

## Dependency Management

### Git Submodules (`lib/`)

External dependencies are managed as Git submodules in the `lib/` directory. Each submodule is pinned to a specific commit hash for reproducible builds.

```
Imported by

Imported by

Inherited by

Used by

Implements

Inherited by

lib/

forge-std/
(Foundry Testing)

uniswap-hooks/
(OpenZeppelin Hook Base)

hookmate/
(Hook Dev Utilities)

v4-core/
(Uniswap V4 Core)

v4-periphery/
(Uniswap V4 Helpers)

system-smart-contracts/
(Reactive Network Core)

test/*.sol

script/*.s.sol

src/AegisHook.sol

src/AegisSentinel.sol
```

For initialization and update procedures, see [Git Submodules](/HACK3R-CRYPTO/Aegis/4.3-git-submodules).

**Sources:**[contracts/README.md1-123](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/README.md#L1-L123)

---

## File Path Mapping Reference

This table maps conceptual system components to their physical locations in the repository:
System ComponentFile PathDescriptionCircuit Breaker`contracts/src/AegisHook.sol`Uniswap v4 hook on UnichainAutonomous Monitor`contracts/src/AegisSentinel.sol`Reactive Network event listenerPrice Feed Simulator`contracts/src/MockOracle.sol`Testnet oracle on SepoliaReputation System`contracts/src/AegisGuardianRegistry.sol`ERC-721/ERC-8004 registry on SepoliaHook Mining Utility`contracts/script/HookMiner.s.sol`CREATE2 salt calculator for 0x80... addressOracle Deployment`contracts/script/04_DeployOracle.s.sol`Sepolia L1 deployment scriptSentinel Deployment`contracts/script/05_DeploySentinel.s.sol`Reactive Network deployment scriptHook Deployment`contracts/script/06_DeployHook.s.sol`Unichain L2 deployment scriptDashboard Frontend`frontend/`Next.js monitoring applicationTesting Framework`lib/forge-std/`Foundry Standard LibraryUniswap Integration`lib/uniswap-hooks/`OpenZeppelin hook base contractsReactive Integration`lib/system-smart-contracts/`Reactive Network core contracts
**Sources:**[contracts/README.md32-122](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/README.md#L32-L122)[.gitignore1-26](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/.gitignore#L1-L26)

---

## Build Artifact Flow

This diagram illustrates how source code is transformed into deployment artifacts:

```
Deployment Logs (Optional)

Artifacts (Excluded from Git)

Build Phase

Source Code

Compiled by

forge script --broadcast

Bundled by

next export

contracts/src/*.sol
(Solidity Source)

frontend/components/*.tsx
(TypeScript Source)

forge build

next build

contracts/out/
(ABI + Bytecode JSON)

contracts/cache/
(Compiler Cache)

frontend/.next/
(Bundled JS/CSS)

frontend/out/
(Static HTML)

contracts/broadcast/
(Transaction Receipts)
```

**Sources:**[.gitignore10-13](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/.gitignore#L10-L13)[.gitignore20-22](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/.gitignore#L20-L22)[contracts/.gitignore1-15](https://github.com/HACK3R-CRYPTO/Aegis/blob/5ea5ecc2/contracts/.gitignore#L1-L15)